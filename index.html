<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>R-Drive: Space Highway</title>
    <style>
        :root { --neon-blue: #00f3ff; --neon-pink: #ff00ff; --bg: #020205; }
        body { margin: 0; overflow: hidden; background: var(--bg); color: white; font-family: 'Orbitron', sans-serif; touch-action: none; }
        
        #hud { position: fixed; top: 20px; width: 100%; display: flex; justify-content: space-around; z-index: 100; pointer-events: none; }
        .stat { background: rgba(0, 243, 255, 0.1); padding: 10px 20px; border: 1px solid var(--neon-blue); border-radius: 5px; box-shadow: 0 0 15px rgba(0,243,255,0.3); }

        canvas { display: block; }

        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; text-align: center; }
        button { padding: 15px 50px; font-size: 20px; background: var(--neon-blue); border: none; color: black; font-weight: bold; border-radius: 5px; cursor: pointer; margin-top: 25px; box-shadow: 0 0 20px var(--neon-blue); }
    </style>
</head>
<body>

<div id="hud">
    <div class="stat">SPEED: <span id="speed">0</span> KM/H</div>
    <div class="stat">DISTANCE: <span id="dist">0</span>M</div>
</div>

<div id="start-screen" class="overlay">
    <h1 style="color: var(--neon-blue); font-size: 40px; margin:0;">R-DRIVE</h1>
    <p style="opacity: 0.8;">SPACE HIGHWAY PATROL</p>
    <p>Drag Left/Right to steer.<br>Avoid other ships and obstacles!</p>
    <button onclick="startRace()">IGNITION</button>
</div>

<canvas id="raceCanvas"></canvas>

<script>
    const canvas = document.getElementById('raceCanvas');
    const ctx = canvas.getContext('2d');
    let gameActive = false, distance = 0, currentSpeed = 0;
    
    const player = { x: 0, y: 0, w: 40, h: 70 };
    let enemies = [];
    let particles = [];

    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playEngine(f, v) {
        if(!gameActive) return;
        const osc = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        osc.type = 'sawtooth';
        osc.frequency.value = f;
        osc.connect(g); g.connect(audioCtx.destination);
        g.gain.setValueAtTime(v, audioCtx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.1);
        osc.start(); osc.stop(audioCtx.currentTime + 0.1);
    }

    function init() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        player.x = canvas.width / 2 - 20;
        player.y = canvas.height - 120;
        
        // Stars background
        for(let i=0; i<50; i++) {
            particles.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, s: Math.random()*5 + 2 });
        }
    }

    function startRace() {
        document.getElementById('start-screen').style.display = 'none';
        gameActive = true;
        if(audioCtx.state === 'suspended') audioCtx.resume();
        init();
        spawnEnemy();
        update();
    }

    function spawnEnemy() {
        if(!gameActive) return;
        enemies.push({ 
            x: Math.random() * (canvas.width - 40), 
            y: -100, 
            w: 40, 
            h: 70, 
            color: Math.random() > 0.5 ? '#ff00ff' : '#00ff00' 
        });
        setTimeout(spawnEnemy, Math.max(300, 1000 - distance/100));
    }

    window.onpointermove = (e) => {
        if(!gameActive) return;
        player.x = e.clientX - 20;
    };

    function update() {
        if(!gameActive) return;

        ctx.fillStyle = '#020205';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Move and draw Stars
        ctx.fillStyle = "white";
        particles.forEach(p => {
            p.y += p.s + (currentSpeed/10);
            if(p.y > canvas.height) p.y = 0;
            ctx.fillRect(p.x, p.y, 2, p.s);
        });

        // Speed Logic
        if(currentSpeed < 320) currentSpeed += 0.5;
        distance += Math.floor(currentSpeed / 10);
        document.getElementById('speed').innerText = Math.floor(currentSpeed);
        document.getElementById('dist').innerText = distance;
        playEngine(60 + currentSpeed/5, 0.02);

        // Draw Player Ship (Neon)
        ctx.shadowBlur = 15;
        ctx.shadowColor = '#00f3ff';
        ctx.fillStyle = '#00f3ff';
        ctx.fillRect(player.x, player.y, player.w, player.h);
        ctx.fillStyle = 'white';
        ctx.fillRect(player.x + 5, player.y + 10, 30, 15); // Cockpit

        // Enemies
        enemies.forEach((en, i) => {
            en.y += 8 + (currentSpeed/20);
            ctx.shadowColor = en.color;
            ctx.fillStyle = en.color;
            ctx.fillRect(en.x, en.y, en.w, en.h);

            // Collision
            if(player.x < en.x + en.w && player.x + player.w > en.x &&
               player.y < en.y + en.h && player.y + player.h > en.y) {
                gameOver();
            }

            if(en.y > canvas.height) enemies.splice(i, 1);
        });

        requestAnimationFrame(update);
    }

    function gameOver() {
        gameActive = false;
        alert("CRASHED! Distance: " + distance + "m");
        location.reload();
    }
</script>
</body>
</html>